---
navigation_title: "9.2.0"
---
# Elasticsearch Java Client 9.2.0 [elasticsearch-java-client-920]

Discover what changed in the 9.2.0 version of the Java client. 

## Breaking changes [elasticsearch-java-client-920-breaking-changes]

::::{dropdown} Map to NamedValue CompositeAggregation.sources  
`sources` in `CompositeAggregation` was wrongly mapped as `List<Map>`, but the server doesn't actually accept more than one value, so the type has been changed to `List<NamedValue>`.

**Action**<br> Change the builder to use the correct type.
Example:
- Old
    ```java
    esClient.search(s -> s
        .aggregations("agg", a -> a
            .composite(c -> c
                .sources(Map.of("source", CompositeAggregationSource.of(cas -> cas...))))
        )
    );
    ```
- New
    ```java
    esClient.search(s -> s
        .aggregations("agg", a -> a
            .composite(c -> c
                .sources(NamedValue.of("source", CompositeAggregationSource.of(cas -> cas...))))
        )
    );
    ``` 

::::

::::{dropdown} String to Double GetOverallBucketsRequest.overallScore  
`overallScore` in `GetOverallBucketsRequest` was wrongly mapped as `String`, but the correct value to be sent to the server is `Double`, so the type has been changed to `Double`.

**Action**<br> Change the builder to use the correct type.
Example:
- Old
    ```java
    esClient.ml()
        .getOverallBuckets(b -> b
            .overallScore("2")
            ...
    );
    ```
- New
    ```java
    esClient.ml()
        .getOverallBuckets(b -> b
            .overallScore(2D)
            ...
    );
    ```
::::

::::{dropdown} Level to NodeStatsLevel NodesStatsRequest.level  
`level` in `NodesStatsRequest` was wrongly mapped as the `Level` enum, which did not match the values accepted by the server, so it has been replaced with `NodeStatsLevel`.

**Action**<br> Change the builder to use the correct enum.
Example:
- Old
    ```java
    esClient.nodes()
        .stats(s -> s
            .level(Level.Indices)
        );
    ```
- New
    ```java
    esClient.nodes()
        .stats(s -> s
            .level(NodeStatsLevel.Indices)
        );
    ```
::::

elasticsearch.streams.StreamsStatusRequest
masterTimeout: modified from elasticsearch._types.TimeUnit to elasticsearch._types.Time

::::{dropdown} TimeUnit to Time StreamsStatusRequest.masterTimeout  
`masterTimeout` in `StreamsStatusRequest` was wrongly mapped as `TimeUnit`, but the correct value to be sent to the server is `Time`, so the type has been changed to `Time`.

**Action**<br> Change the builder to use the correct type.
Example:
- New
    ```java
    esClient.streams()
        .status(s -> s
            .masterTimeout(Time.of(t -> t.time("10s")))
        );
    ```
::::


## Features and enhancements [elasticsearch-java-client-920-features-enhancements]

::::{dropdown} Opentelemetry update to stable conventions   
Following the stable release of Opentelemetry's database conventions, the client was updated to use the correct attribute names.
More details in the PR: [#1017](https://github.com/elastic/elasticsearch-java/pull/1017)
::::

::::{dropdown} GetAliasResponse exception bug fix  
`GetAliasesResponse` is a special case because it can return both an exception and the actual response, in case 2 aliases, 1 present and 1 missing, are added to `GetAliasesRequest`. The java client was unable to parse the response and used to throw a `TransportException`, this was fixed by adding the additional alias information to the `metadata` field in `ErrorCause`:
```java
try{
    client.indices().getAlias(a -> a.name("test","test2"));
}
catch (ElasticsearchException e){
    Map<String, JsonData> metadata = e.error().metadata();
    JsonData index = metadata.get("example-index");
    Map aliases = index.to(Map.class);
    assertEquals("test", aliases.keySet().iterator().next());
}
```
More details in the PR: [#1041](https://github.com/elastic/elasticsearch-java/pull/1041)
::::

## Deprecations [elasticsearch-java-client-910-deprecations]

Nothing was deprecated in this version of the client. 
